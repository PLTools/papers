\documentclass[sigconf]{acmart}

\usepackage{booktabs} % For formal tables
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{mathrsfs}
\usepackage{mathtools}
\usepackage{multirow}
\usepackage{listings}
\usepackage{indentfirst}
\usepackage{verbatim}
\usepackage{amsmath, amssymb}
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{url}
\usepackage{stmaryrd}
\usepackage{xspace}
\usepackage{comment}
\usepackage{wrapfig}
\usepackage[caption=false]{subfig}
\usepackage{placeins}
\usepackage{tabularx}
\usepackage{ragged2e}

\newtheorem{theorem}{Theorem}
\newtheorem{lemma}{Lemma}

\def\transarrow{\xrightarrow}
\newcommand{\setarrow}[1]{\def\transarrow{#1}}

\def\padding{\phantom{X}}
\newcommand{\setpadding}[1]{\def\padding{#1}}

\def\subarrow{}
\newcommand{\setsubarrow}[1]{\def\subarrow{#1}}

\newcommand{\trule}[2]{\frac{#1}{#2}}
\newcommand{\crule}[3]{\frac{#1}{#2},\;{#3}}
\newcommand{\withenv}[2]{{#1}\vdash{#2}}
\newcommand{\trans}[3]{{#1}\transarrow{\padding#2\padding}\subarrow{#3}}
\newcommand{\ctrans}[4]{{#1}\transarrow{\padding#2\padding}\subarrow{#3},\;{#4}}
\newcommand{\llang}[1]{\mbox{\lstinline[mathescape]|#1|}}
\newcommand{\pair}[2]{\inbr{{#1}\mid{#2}}}
\newcommand{\inbr}[1]{\left<{#1}\right>}
\newcommand{\highlight}[1]{\color{red}{#1}}
\newcommand{\ruleno}[1]{\eqno[\scriptsize\textsc{#1}]}
\newcommand{\rulename}[1]{\textsc{#1}}
\newcommand{\inmath}[1]{\mbox{$#1$}}
\newcommand{\lfp}[1]{fix_{#1}}
\newcommand{\gfp}[1]{Fix_{#1}}
\newcommand{\vsep}{\vspace{-2mm}}
\newcommand{\supp}[1]{\scriptsize{#1}}
\renewcommand{\G}{\mathfrak G}
\newcommand{\sembr}[1]{\llbracket{#1}\rrbracket}
\newcommand{\cd}[1]{\texttt{#1}}
\newcommand{\miniKanren}{miniKanren\xspace}
\newcommand{\ocanren}{OCanren\xspace}
\newcommand{\free}[1]{\boxed{#1}}
\newcommand{\binds}{\;\mapsto\;}
\newcommand{\dbi}[1]{\mbox{\bf{#1}}}
\newcommand{\sv}[1]{\mbox{\textbf{#1}}}
\newcommand{\bnd}[2]{{#1}\mkern-9mu\binds\mkern-9mu{#2}}

\newcommand{\meta}[1]{{\mathcal{#1}}}
\renewcommand{\emptyset}{\varnothing}

\lstdefinelanguage{ocanren}{
keywords={fresh, let, in, match, with, when, class, type,
object, method, of, rec, repeat, until, while, not, do, done, as, val, inherit,
new, module, sig, deriving, datatype, struct, if, then, else, open, private, virtual, include, success, failure,
true, false},
sensitive=true,
commentstyle=\small\itshape\ttfamily,
keywordstyle=\ttfamily\underbar,
identifierstyle=\ttfamily,
basewidth={0.5em,0.5em},
columns=fixed,
fontadjust=true,
literate={fun}{{$\lambda$}}1 {->}{{$\to$}}3 {===}{{$\equiv$}}1 {=/=}{{$\not\equiv$}}1 {|>}{{$\triangleright$}}3 {\\/}{{$\vee$}}2 {/\\}{{$\wedge$}}2 {^}{{$\uparrow$}}1,
morecomment=[s]{(*}{*)}
}

\lstset{
mathescape=true,
%basicstyle=\small,
identifierstyle=\ttfamily,
keywordstyle=\bfseries,
commentstyle=\scriptsize\rmfamily,
basewidth={0.5em,0.5em},
fontadjust=true,
language=ocanren
}

\usepackage{letltxmacro}
\newcommand*{\SavedLstInline}{}
\LetLtxMacro\SavedLstInline\lstinline
\DeclareRobustCommand*{\lstinline}{%
  \ifmmode
    \let\SavedBGroup\bgroup
    \def\bgroup{%
      \let\bgroup\SavedBGroup
      \hbox\bgroup
    }%
  \fi
  \SavedLstInline
}

\sloppy

\begin{document}

\title{Improving Refutational Completeness\\
of Relational Search via Divergence Test$^*$}

\thanks{$^*\;$This work is supported by RFBR grant No 18-01-00380.}

%\titlenote{Produces the permission block, and
%  copyright information}

\author{Dmitri Rozplokhas}
\affiliation{%
  \institution{St. Petersburg Academic University}
  \streetaddress{Khlopina st., 8-3-–ê}
  \city{St. Petersburg}
  \state{Russia}
  \postcode{194021}
}
\email{rozplokhas@gmail.com}

\author{Dmitri Boulytchev}
\affiliation{%
  \institution{St. Petersburg State University}
  \streetaddress{Universitetskaya emb., 7-9}
  \city{St. Petersburg}
  \state{Russia}
  \postcode{199034}
}
\email{dboulytchev@math.spbu.ru}

\begin{abstract}
We describe a search optimization technique for implementation of relational programming language
miniKanren which makes more queries converge. Specifically, we address the problem of conjunction
non-commutativity. Our technique is based on a certain divergence criterion that we use to trigger a
dynamic reordering of conjuncts. We present a formal semantics of a miniKanren-like language and prove
that our optimization does not compromise already converging programs, thus, being a proper improvement.
We also present the prototype implementation of the improved search and demonstrate its application for a
number of realistic specifications.
\end{abstract}

%
% The code below should be generated by the tool at
% http://dl.acm.org/ccs.cfm
% Please copy and paste the code instead of the example below.
%
\begin{CCSXML}
<ccs2012>
<concept>
<concept_id>10003752.10003790.10003795</concept_id>
<concept_desc>Theory of computation~Constraint and logic programming</concept_desc>
<concept_significance>500</concept_significance>
</concept>
<concept>
<concept_id>10003752.10010124.10010131.10010134</concept_id>
<concept_desc>Theory of computation~Operational semantics</concept_desc>
<concept_significance>100</concept_significance>
</concept>
<concept>
<concept_id>10011007.10011006.10011008.10011009.10011015</concept_id>
<concept_desc>Software and its engineering~Constraint and logic languages</concept_desc>
<concept_significance>500</concept_significance>
</concept>
</ccs2012>
\end{CCSXML}

\ccsdesc[500]{Theory of computation~Constraint and logic programming}
\ccsdesc[100]{Theory of computation~Operational semantics}
\ccsdesc[500]{Software and its engineering~Constraint and logic languages}

\keywords{relational programming, refutational completeness, divergence test}

\copyrightyear{2018}
\acmYear{2018}
\setcopyright{acmcopyright}
\acmConference[PPDP '18]{The 20th International Symposium on Principles and Practice of Declarative Programming}{September 3--5, 2018}{Frankfurt am Main, Germany}
\acmBooktitle{The 20th International Symposium on Principles and Practice of Declarative Programming (PPDP '18), September 3--5, 2018, Frankfurt am Main, Germany}
\acmPrice{15.00}
\acmDOI{10.1145/3236950.3236958}
\acmISBN{978-1-4503-6441-6/18/09}

\maketitle

\input{introduction.tex}
\input{language.tex}
\input{incompl.tex}
\input{improvement.tex}
\input{evaluation.tex}
\input{related.tex}
\input{conclusion.tex}

\bibliographystyle{ACM-Reference-Format}
\bibliography{main}

\end{document}
