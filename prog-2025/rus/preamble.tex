% !TeX spellcheck = ru_RU
% !TEX root = mainrus.tex

\usepackage{ifxetex,ifluatex}
\newif\ifxetexorluatex
\ifxetex
\xetexorluatextrue
\else
\ifluatex
\xetexorluatextrue
\else
\xetexorluatexfalse
\fi
\fi

\ifxetexorluatex
    %\usepackage{fontspec}
    %\usepackage{unicode-math}
    %\setmainfont[Ligatures=TeX]{CMU Serif}
    %\setsansfont[Ligatures=TeX]{CMU Sans Serif}
    %\setmathfont[Scale=MatchUppercase]{Asana Math}

    %\usepackage{polyglossia}
    %\setmainlanguage{russian}
    %\setotherlanguage{english}
\else
  \usepackage[utf8]{inputenc}
  \usepackage[T2A]{fontenc}
  \usepackage[russian,english]{babel}
  \usepackage{euler}
\fi

\usepackage[autostyle=true]{csquotes}
\usepackage{xcolor}
\usepackage{mathtools}
%\usepackage[draft]{hyperref}
\usepackage{marginnote}
\usepackage{verbatim}
\usepackage{listings}
\usepackage{multirow}
\usepackage{array}
\usepackage{url}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{xspace}
\usepackage{flushend} % Equalizes columns on the last page
\usepackage{placeins}
\usepackage{soul}
\usepackage{verbatimbox}
\usepackage[title]{appendix}
\usepackage[ru-RU]{datetime2}
\DTMsetup{useregional=numeric}
\DTMtryregional{ru}{RU}
\usepackage{tikz}
\usetikzlibrary{shapes.geometric,backgrounds,fit,
  %positioning-plus,
  %node-families,
  calc}

\newcommand{\term}[1]{\mbox{\texttt{\textbf{#1}}}}
\newcommand{\run}[2]{\term{run}^{#1}\,\left[#2\right]}
\newcommand{\todo}[1]{{\bf\color{red}#1}}
\newcommand{\rel}[3]{{#1}\xrightarrow{#2}{#3}}
\newcommand{\prg}[1]{\mbox{\lstinline|#1|}}
\renewcommand{\leq}{\ensuremath{\leqslant}}
\renewcommand{\geq}{\ensuremath{\geqslant}}

\lstdefinelanguage{guideline}{
keywords={},
sensitive=true,
commentstyle=\small\itshape\ttfamily,
keywordstyle=\ttfamily\underbar,
identifierstyle=\ttfamily,
basewidth={0.5em,0.5em},
columns=fixed,
fontadjust=true,
literate={->}{{$\to$}}3 {=>}{{$\Rightarrow$}}3,
morecomment=[s]{(*}{*)}
}

\lstdefinelanguage{ocanren}{
keywords={run, conde, fresh, let, in, match, with, when, class, type,
object, method, of, rec, repeat, until, while, not, do, done, as, val, inherit,
new, module, sig, deriving, datatype, struct, if, then, else, open, private, virtual, include, success, failure, switch,
true, false, ocanren},
sensitive=true,
commentstyle=\small\itshape\ttfamily,
keywordstyle=\ttfamily\textbf,
identifierstyle=\ttfamily,
basewidth={0.5em,0.5em},
columns=fixed,
mathescape=true,
fontadjust=true,
literate={fun}{{$\lambda$}}1 {->}{{$\to$}}3 {===}{{$\equiv$}}1 {=/=}{{$\not\equiv$}}1 {|>}{{$\triangleright$}}3 {\\/}{{$\vee$}}2 {/\\}{{$\wedge$}}2 {^}{{$\uparrow$}}1
%{[]}{{\texttt|[]|}}1
,
morecomment=[s]{(*}{*)}
}

\lstdefinelanguage{ocaml}{
keywords={type, struct},
sensitive=true,
commentstyle=\small\itshape\ttfamily,
keywordstyle=\ttfamily\textbf,
%keywordstyle=\ttfamily\underbar,
identifierstyle=\ttfamily,
basewidth={0.5em,0.5em},
columns=fixed,
fontadjust=true,
literate={->}{{$\to$}}3 {=>}{{$\Rightarrow$}}3,
morecomment=[s]{(*}{*)}
}

\lstdefinelanguage{algo}{
basicstyle=\small\ttfamily,
keywords={if, for, return},
sensitive=true,
commentstyle=\small\itshape\rmfamily,
keywordstyle=\rmfamily\textbf,
%keywordstyle=\ttfamily\underbar,
identifierstyle=\rmfamily,
basewidth={0.5em,0.5em},
columns=fixed,
fontadjust=true,
literate={->}{{$\to$}}3 {=>}{{$\Rightarrow$}}3,
morecomment=[l]{//},
morecomment=[s]{(*}{*)}
}

\newcommand{\iffr}{тогда и только тогда, когда}
\newcommand{\OCaml}{\textsc{OCaml}\xspace}
\newcommand{\OCanren}{\textsc{OCanren}\xspace}
\newcommand{\noCanren}{\textsc{noCanren}\xspace}
\newcommand{\Zthree}{\textsc{Z3}\xspace}
\newcommand{\JavaScript}{\textsc{JavaScript}\xspace}
\newcommand{\JSOO}{\textsc{Js\_of\_ocaml}\xspace}

\newcommand{\footnoteRED}[1]{\footnote{\textcolor{red}{#1}}}